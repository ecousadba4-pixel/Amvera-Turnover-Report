<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Выручка</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="centered">
    <div class="dashboard">
      <div class="card filter-card" id="filterCard">
        <div class="card-header">
          <div class="section-title" id="filterTitle">Дата выезда</div>
          <button class="link-button" id="resetFiltersBtn" type="button">Сбросить</button>
        </div>

        <div class="presetbar" id="datePresetBar">
          <button class="preset-button is-active" id="btnCurMonth" type="button">Текущий месяц</button>
          <button class="preset-button" id="btnPrevMonth" type="button">Прошлый месяц</button>
        </div>

        <div class="form-grid two-column" id="dateInputs">
          <div class="form-group">
            <label for="fromDate">От</label>
            <input type="date" id="fromDate" class="form-input" />
          </div>
          <div class="form-group">
            <label for="toDate">До</label>
            <input type="date" id="toDate" class="form-input" />
          </div>
        </div>
        <div class="form-error" id="filterError" role="alert" aria-live="assertive" hidden></div>
      </div>

      <div class="card analytics-card" id="analyticsCard">
        <div class="section-switch section-switch--equal" role="tablist" aria-label="Выбор раздела аналитики">
          <button
            class="section-switch__btn is-active"
            type="button"
            data-section-target="revenue"
            id="tabRevenue"
            role="tab"
            aria-selected="true"
            aria-controls="revenueSection"
          >
            Выручка
          </button>
          <button
            class="section-switch__btn"
            type="button"
            data-section-target="services"
            id="tabServices"
            role="tab"
            aria-selected="false"
            aria-controls="servicesSection"
            tabindex="-1"
          >
            Услуги
          </button>
        </div>

        <div class="info-summary" id="revenueSection" role="tabpanel" aria-labelledby="tabRevenue" aria-hidden="false">
          <div class="summary-card summary-card--revenue" data-metric="revenue">
            <div class="summary-label">Выручка всего</div>
            <div class="summary-value" id="revenue">—</div>
          </div>
          <div class="summary-card summary-card--count" data-metric="bookings_count">
            <div class="summary-label">Кол-во номеров</div>
            <div class="summary-value" id="count">—</div>
          </div>
          <div class="summary-card summary-card--repeat" data-metric="level2plus_share">
            <div class="summary-label">Повт. клиенты</div>
            <div class="summary-value" id="share">—</div>
          </div>
          <div class="summary-card summary-card--average" data-metric="avg_check">
            <div class="summary-label">Средний чек</div>
            <div class="summary-value" id="avg">—</div>
          </div>
          <div class="summary-card summary-card--min" data-metric="min_booking">
            <div class="summary-label">Мин. чек</div>
            <div class="summary-value" id="min">—</div>
          </div>
          <div class="summary-card summary-card--max" data-metric="max_booking">
            <div class="summary-label">Макс. чек</div>
            <div class="summary-value" id="max">—</div>
          </div>
          <div class="summary-card summary-card--stay" data-metric="avg_stay_days">
            <div class="summary-label">Ср. срок прожив.</div>
            <div class="summary-value" id="stay">—</div>
          </div>
          <div class="summary-card summary-card--bonus" data-metric="bonus_payment_share">
            <div class="summary-label">Оплата бонусами</div>
            <div class="summary-value" id="bonus">—</div>
          </div>
          <div class="summary-card summary-card--services" data-metric="services_share">
            <div class="summary-label">Доля услуг</div>
            <div class="summary-value" id="servicesShare">—</div>
          </div>
        </div>
      </div>

      <div
        class="card services-card hidden"
        id="servicesSection"
        role="tabpanel"
        aria-labelledby="tabServices"
        aria-hidden="true"
      >
        <div class="services-total" id="servicesTotal">Итого: —</div>
        <div class="services-list" id="servicesList">
          <div class="services-empty">Выберите период, чтобы увидеть данные</div>
        </div>
      </div>
      <div class="card monthly-card" id="monthlyDetails" aria-live="polite">
        <div class="monthly-header">
          <div class="monthly-title" id="monthlyTitle">Помесячная динамика</div>
          <div class="monthly-range section-switch section-switch--equal" role="radiogroup" aria-label="Выбор периода">
            <button
              type="button"
              class="section-switch__btn monthly-range__btn is-active"
              data-monthly-range="this_year"
              aria-pressed="true"
            >
              Этот год
            </button>
            <button
              type="button"
              class="section-switch__btn monthly-range__btn"
              data-monthly-range="last_12_months"
              aria-pressed="false"
            >
              Посл. 12 мес.
            </button>
          </div>
        </div>
        <div class="monthly-body">
          <div class="monthly-empty" id="monthlyEmpty">Выберите показатель, чтобы увидеть динамику</div>
          <div class="monthly-table hidden" id="monthlyTable">
            <div class="monthly-table__rows" id="monthlyRows"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="loading-overlay" aria-hidden="true">
    <div class="spinner" role="presentation"></div>
  </div>

  <div class="overlay" id="gate">
    <div class="modal">
      <h2>Доступ по паролю</h2>
      <p class="modal-text">Введите пароль, чтобы открыть показатели выручки.</p>
      <div>
        <input type="password" id="pwd" placeholder="Пароль" />
      </div>
      <div class="err" id="err"></div>
      <div class="footer">
        <button id="goBtn" type="button">Войти</button>
      </div>
    </div>
  </div>

  <script src="app.js" defer></script>
</body>
</html>
